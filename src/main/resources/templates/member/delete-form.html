<!DOCTYPE html>
<html xmlns:th="https://thymeleaf.orf">
<head>

    <th:block th:include="/main/index-head"></th:block>
    <title>Kare Member Delete : Clean Blog - Start Bootstrap Theme</title>

    <script type="text/javascript">
        const onHandleDelete = (no) => {
            const xhr = new XMLHttpRequest();

            let data = {};
            data.id = document.getElementById("id").value;
            data.pw = document.getElementById("pw").value;
            let json = JSON.stringify(data);

            xhr.open("DELETE", "/member/" + no, true);
            xhr.setRequestHeader('Content-type','application/json; charset=utf-8');

            xhr.onload = function () {
                if (xhr.readyState == 4 && xhr.status == "200") {
                    window.location.href = '/';
                } else {
                    alert("error")
                }
            }
            xhr.send(json);

        }
    </script>
</head>

<body>

     <!-- Navigation -->
    <th:block th:include="/main/index-nav"></th:block>

     <!-- Page Header -->
    <header class="masthead" th:style="'background-image: url(../img/contact-bg.jpg)'">

        <div class="overlay"></div>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-md-10 mx-auto">
                    <div class="page-heading">
                        <h1>Unregister</h1>
                        <span class="subheading">회원 탈퇴</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">
                    <!-- id -->
                    <div class="mb-5">
                        <label for="id">Email <span class="text-muted"></span></label>
                        <input type="text" class="form-control" name="id" th:value="${member.id}" id="id" readOnly>
                    </div>

                    <!-- pw -->
                    <div class="mb-5">
                        <label for="pw">Password</label>
                        <input type="password" class="form-control" name="pw" id="pw" placeholder="passwd" required="">
                    </div>

                    <div class="text-center mt-5">
                        <a href="javascript:history.back();" class="btn btn-primary">이전으로</a>
                        <button class="btn btn-primary" th:onclick="'javascript:onHandleDelete(' + ${member.no} +')'">Unregister</button>
                    </div>

            </div>
        </div>
    </div>

   <hr>
     <!-- Footer -->
    <th:block th:include="/main/index-footer"></th:block>
</body>
</html>


